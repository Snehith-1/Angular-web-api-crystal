<div class="card shadow-sm">
    <div class="card-header">
      <h3 class="card-title">MANAGE LEAVE</h3>
    </div>
</div>
<div class="card shadow-sm mt-5">
    <div class="align">
        <div class="col-12 col-lg-4 col-md-6 col-sm-12">
          <div class="d-flex align-items-center">
            <b><span class="font-bold" style="margin-left: 10px;">Leave Generating For</span></b>
           <b> <p class="mt-3" style="color: red;margin-left: 15px;">{{this.LeaveGeneratingFor}}</p></b>
          </div>
        </div>
        <div class="col-12 col-lg-4 col-md-6 col-sm-12">
          <div class="d-flex align-items-center">
            <b><span class="font-bold" style="margin-left: 10px;">No. Of Working Days</span></b>
            <b> <p class="mt-3"  style="color: red;margin-left: 15px;"></p></b>
          </div>
        </div>
        <div class="col-12 col-lg-4 col-md-6 col-sm-12">
            <div class="d-flex align-items-center">
              <b><span class="font-bold" style="margin-left: 10px;">Payrun Date</span></b>
              <b> <p class="mt-3"  style="color: red;margin-left: 15px;">{{this.date}}</p></b>
            </div>
          </div>
      </div>
</div>





<form [formGroup]="reactiveForm" #form="ngForm">

    <div class="card shadow-sm mt-5">
       
        <br>
        <div class="table-responsive">
            <div class="card card-body m-3 shadow-lg p-3 mb-5 bg-white rounded">
                <table id="employeeleavelist" class="table table-striped table-row-bordered gy-5 gs-7 ">
                    <thead>
                        <tr class="fw-bold fs-8 text-nowrap bg-lightblue text-blue table-header">
 
                            <th>
                                <input type="checkbox" id="checkAll" (change)="$event ? masterToggle() : null"
                                    [checked]="selection.hasValue() && isAllSelected()"
                                    [indeterminate]="selection.hasValue() && !isAllSelected()" />
                            </th>
                            <th>S.No</th>
                            <th>Employee Code</th>
                            <th>Employee Name</th>
                            <th>Total Days</th>
                            <th>Worked Days</th>
                            <th>Holiday</th>
                            <th>Leave</th>
                            <th>Absent</th>
                            <th>Late</th>
                            <th>Weekoff days</th>
                            <th>Actual LOP Days</th>
                            <th>Adjusted LOP Days</th>
                            <th>Permission (in Minutes)</th>
                            <th>Salary days</th>                            
                        </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let data of employeeleave_list; let i=index;" class="fs-8">
                        <td> <input type="checkbox" (click)="$event.stopPropagation()"
                            (change)="$event ? selection.toggle(data) : null"
                            [checked]="selection.isSelected(data)" /></td>
                        <td>{{i+1}}</td>
                        <td>{{data.user_code}}</td>
                        <td>{{data.username}}</td>
                        <td>{{data.total_days}}</td>
                        <td>{{data.month_workingdays}}</td>
                        <td>
                          <input type="text" [(ngModel)]="data.holiday" placeholder="0.0" style="width:107%;" class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                          formControlName="holiday_{{i}}" />                       
                        </td>
                        <td>
                          <input type="text" [(ngModel)]="data.leave" placeholder="0.0" style="width:127%;" class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                          formControlName="leave_{{i}}" />
                        </td>
                        <td>
                          <input type="text" [(ngModel)]="data.absent" placeholder="0.0" style="width:120%;" class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                          formControlName="absent_{{i}}" />
                        </td>
                        <td>
                          <input type="text" [(ngModel)]="data.late" placeholder="0.0" style="width:130%;" class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                          formControlName="late_{{i}}" />
                        </td>
                        <td>
                          <input type="text" [(ngModel)]="data.weekoff_days" placeholder="0.0" style="width:107%;" class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                          formControlName="weekoff_days_{{i}}" />
                        </td>
                        <td>
                          {{data.lop}}
                          <input type="data.lop" [(ngModel)]="data.lop" class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                          formControlName="actual_lop_{{i}}" />
                        </td>
                        <td>
                          {{data.lop}}
                          <input type="data.lop" [(ngModel)]="data.lop" class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                          formControlName="adjusted_lop_{{i}}" />
                        </td>
                        <td>
                          <input type="text" [(ngModel)]="data.permission" placeholder="0.0" class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                          formControlName="permission_{{i}}" />
                        </td>
                        <td>
                          <input type="text" [(ngModel)]="data.salary_days" placeholder="0.0" class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                          formControlName="salary_days_{{i}}" />
                        </td> 
                      </tr>
                    </tbody>
                     
                </table>
            </div> 
        </div> 
    </div>
    
    <div class="text-center my-4">
      <button class="btn-sm text-white me-2" [disabled]="reactiveForm.invalid" [ngClass]="{
          'primary-button': !reactiveForm.invalid,
          'secondary-button': reactiveForm.invalid
        }" (click)="update()">
        <i class="fas fa-check text-white fs-5"></i> &nbsp; Update
      </button>
    
      <button class="btn-primary btn-sm text-white me-4" routerLink="/payroll/PayTrnSalaryManagement">
        <i class="fas fa-arrow-left"></i> &nbsp; Back
      </button>
    </div>
    </form>