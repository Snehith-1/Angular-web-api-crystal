using System.Linq;
using System.Net.Http;
using System.Net;
using System.Web.Http;
using ems.crm.DataAccess;
using ems.crm.Models;
using ems.utilities.Models;
using ems.utilities.Functions;
using System.Collections.Generic;

namespace ems.crm.Controllers
{
    [Authorize]
    [RoutePrefix("api/website")]
    public class websiteController : ApiController
    {
        session_values Objgetgid = new session_values();
        logintoken getsessionvalues = new logintoken();
        daWebsite objdaWebsite = new daWebsite();

      
        [ActionName("chatSummary")]
        [HttpGet]
        public HttpResponseMessage chatSummarydetails()
        {
            MdlWebsite values = new MdlWebsite();
            objdaWebsite.DachatSummary(values);
            return Request.CreateResponse(HttpStatusCode.OK, values);


        }
        //[ActionName("Getchatdetails")]
        //[HttpGet]
        //public HttpResponseMessage Getchatdetails(string inlinechat_gid, string chat_id, string thread_id)
        //{
        //    mdlinlinechat values = new mdlinlinechat();
        //    objdaWebsite.DaGetchatdetails(values, inlinechat_gid,chat_id,thread_id);
        //    return Request.CreateResponse(HttpStatusCode.OK, values);
        //}
        [ActionName("Getuserdeatils")]
        [HttpGet]
        public HttpResponseMessage Getuserdeatils(string inlinechat_gid)
        {
            MdlWebsite values = new MdlWebsite();
            objdaWebsite.DaGetuserdeatils(values, inlinechat_gid);
            return Request.CreateResponse(HttpStatusCode.OK, values);
        }
        [ActionName("Getlistofchat")]
        [HttpGet]
        public HttpResponseMessage Getlistofchat()
        {
            MdlWebsite values = new MdlWebsite();
            objdaWebsite.Dalistofchat(values);
            return Request.CreateResponse(HttpStatusCode.OK, values);
        }
        [ActionName("Getlistofthreads")]
        [HttpGet]
        public HttpResponseMessage Getlistofthreads()
        {
            Rootobject2 values = new Rootobject2();
            objdaWebsite.Dalistofthreads(values);
            return Request.CreateResponse(HttpStatusCode.OK, values);


        }
        [ActionName("Getindividualchat")]
        [HttpGet]
        public HttpResponseMessage Getindividualchat(string inlinechat_gid, string chat_id)
        {
            mdlinlinechat values = new mdlinlinechat();
            objdaWebsite.Daindividualchat(values, inlinechat_gid, chat_id);
            return Request.CreateResponse(HttpStatusCode.OK, values);


        }
        [ActionName("Messagesend")]
        [HttpPost]
        public HttpResponseMessage Messagesend(messagesend values)
        {
            result objResult = new result();
            objResult = objdaWebsite.DaMessagesend(values, getsessionvalues.user_gid);
            return Request.CreateResponse(HttpStatusCode.OK, objResult);


        }
        //[ActionName("addusertochat")]
        //[HttpGet]
        //public HttpResponseMessage addusertochat()
        //{
        //    MdlWebsite values = new MdlWebsite();
        //    objdaWebsite.Daaddusertochat(values);
        //    return Request.CreateResponse(HttpStatusCode.OK, values);
        //}
    }
}