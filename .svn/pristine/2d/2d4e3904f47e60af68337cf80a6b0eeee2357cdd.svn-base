<div class="card shadow-sm">
    <div class="card-header bg-whatsapp" style="color: white;">
        <h3 class="card-title"> <i class="fa fa-paper-plane fs-1"></i> &nbsp;&nbsp;
            Send Campaign </h3>
        <div style="margin: 13px">
            <div class="col me-5">
                <button title="Back" routerLink="/crm/CrmSmmWhatsappcampaign"
                    class="btn-secondary btn-sm text-black me-4 "><i class="ki-duotone ki-entrance-right fs-5">
                        <i class="path1"></i>
                        <i class="path2"></i>
                    </i>&nbsp;Back</button>
            </div>
        </div>
    </div>
    <ul class="nav nav-tabs nav-line-tabs nav-line-tabs-20x mb-3 fs-6 border-bottom text-center mt-2" id="myTab"
        role="tablist">
        <li class="active justify-content-center col nav-link sample border rounded-0 p-4 count" data-bs-toggle="tab"
            href="#kt_tab_pane_1">
            <b>Unsent Contacts</b>
        </li>
        <li class="justify-content-center col nav-link sample border rounded-0 p-4 count" data-bs-toggle="tab"
            href="#kt_tab_pane_2">
            <b>Sent Contacts</b>
        </li>
    </ul>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="kt_tab_pane_1" role="tabpanel">
            <form [formGroup]="bulkMessageForm" novalidate="novalidate" (ngSubmit)="onsend()">

                <div class=row>
                    <div class=col-9>
                        <div class="table-responsive">
                            <div class="card card-body m-3 shadow-xl p-3 mb-5 bg-white rounded"
                                style=" max-height: 290px; overflow-y: auto;">
                                <table id="whatsnamelist1"
                                    class="table table-striped table-row-bordered border-bottom gs-7">
                                    <thead>
                                        <tr class=" text-white fw-bold fs-6 text-nowrap bg-whatsapp">
                                            <th style="width:2px;   ">
                                                <input type="checkbox" id="checkAll"
                                                    (change)="$event ? masterToggle() : null"
                                                    [checked]="selection.hasValue() && isAllSelected()"
                                                    [indeterminate]="selection.hasValue() && !isAllSelected()" />
                                            </th>
                                            <th>Name</th>
                                            <th>Contact</th>
                                            <th>Source</th>
                                            <th>Customer Type</th>
                                            <th>Lead Status</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let data of contacts_list1; let i=index;" class="align-middle">
                                                <td> <input type="checkbox" (click)="$event.stopPropagation()"
                                                        (change)="$event ? selection.toggle(data) : null"
                                                        [checked]="selection.isSelected(data)" />
                                                </td>
                                                <td style="white-space: nowrap;">{{data.displayName}}</td>
                                                <td style="white-space: nowrap;">{{data.value}}</td>
                                                <td style="white-space: nowrap;">{{data.source_name}}<span
                                                        *ngIf="data.source_name ===''">-</span></td>
                                                <td style="white-space: nowrap;">{{data.customer_type}} <span
                                                        *ngIf="data.customer_type ===''">-</span></td>
                                                <td>
                                                    <span *ngIf="data.lead_status === 'Assigned' "><label class="ms-3"
                                                            class="badge bg-success text-white ">Assigned</label></span><span
                                                        *ngIf="data.customer_type ===''">-</span>

                                                    <span *ngIf="data.lead_status === 'Not Assigned'"><label
                                                            class="ms-3" class="badge bg-primary text-white ">Not
                                                            Assigned</label></span>

                                                </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class=col-3>
                        <h2>&nbsp;&nbsp;&nbsp;Template Preview :</h2>
                        <div class="card shadow-sm p-4 m-4" style="height: 300px">
                            <h2 style="color: rgb(26, 111, 145);">{{ p_name}}</h2>
                            <div style="height: 280px;overflow-y: scroll;" id="scroll-bar-table">
                                <img *ngIf="media_url" src={{media_url}} alt="" style="width:100%;height:100%;"><span
                                    *ngIf="!media_url"></span>
                                <br><br>
                                <p>{{template_body}}</p>
                                <a style="color: dodgerblue;" href="footer" target="_blank">{{footer}}</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-left: 400px;">
                    <button title="Run Campaign" type="button" class="btn btn-icon btn-sm me-2" data-bs-toggle="modal"
                        data-bs-target="#myModaladd"
                        style="width: 100px;text-align: center;height: 33px;background-color: rgb(63, 149, 55);"
                        (click)="onsend()">
                        <i class="fa fa-paper-plane text-white fs-5"></i>&nbsp; Run Campaign
                    </button>

                </div>
                <br>
            </form>
        </div>
    </div>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show " id="kt_tab_pane_2" role="tabpanel">
            <form [formGroup]="bulkMessageForm" novalidate="novalidate" (ngSubmit)="onsend()">

                <div class=row>
                    <div class=col-9>
                        <div class="table-responsive">
                            <div class="card card-body m-3 shadow-xl p-3 mb-5 bg-white rounded"
                                style=" max-height: 290px; overflow-y: auto;">
                                <table id="whatsnamelist"
                                    class="table table-striped table-row-bordered border-bottom gs-7">
                                    <thead>
                                        <tr class=" text-white fw-bold fs-6 text-nowrap bg-whatsapp">
                                            <th style="width:2px;   ">
                                                <input type="checkbox" id="checkAll"
                                                    (change)="$event ? masterToggle() : null"
                                                    [checked]="selection.hasValue() && isAllSelected()"
                                                    [indeterminate]="selection.hasValue() && !isAllSelected()" />
                                            </th>
                                            <th>Name</th>
                                            <th>Contact</th>
                                            <th>Source</th>
                                            <th>Customer Type</th>
                                            <th>Lead Status</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let data of contacts_list; let i=index;" class="align-middle">
                                                <td> <input type="checkbox" (click)="$event.stopPropagation()"
                                                        (change)="$event ? selection.toggle(data) : null"
                                                        [checked]="selection.isSelected(data)" />
                                                </td>
                                                <td style="white-space: nowrap;">{{data.displayName}}</td>
                                                <td style="white-space: nowrap;">{{data.value}}</td>
                                                <td style="white-space: nowrap;">{{data.source_name}}<span
                                                        *ngIf="data.source_name ===''">-</span></td>
                                                <td style="white-space: nowrap;">{{data.customer_type}} <span
                                                        *ngIf="data.customer_type ===''">-</span></td>
                                                <td>
                                                    <span *ngIf="data.lead_status === 'Assigned' "><label class="ms-3"
                                                            class="badge bg-success text-white ">Assigned</label></span><span
                                                        *ngIf="data.customer_type ===''">-</span>

                                                    <span *ngIf="data.lead_status === 'Not Assigned'"><label
                                                            class="ms-3" class="badge bg-primary text-white ">Not
                                                            Assigned</label></span>

                                                </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class=col-3>
                        <h2>&nbsp;&nbsp;&nbsp;Template Preview :</h2>
                        <div class="card shadow-sm p-4 m-4" style="height: 300px">
                            <h2 style="color: rgb(26, 111, 145);">{{ p_name}}</h2>
                            <div style="height: 280px;overflow-y: scroll;" id="scroll-bar-table">
                                <img *ngIf="media_url" src={{media_url}} alt="" style="width:100%;height:100%;"><span
                                    *ngIf="!media_url"></span>
                                <br><br>
                                <p>{{template_body}}</p>
                                <a style="color: dodgerblue;" href="footer" target="_blank">{{footer}}</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-left: 400px;">
                    <button title="Run Campaign" type="button" class="btn btn-icon btn-sm me-2" data-bs-toggle="modal"
                        data-bs-target="#myModaladd"
                        style="width: 100px;text-align: center;height: 33px;background-color: rgb(63, 149, 55);"
                        (click)="onsend()">
                        <i class="fa fa-paper-plane text-white fs-5"></i>&nbsp;Run Campaign
                    </button>

                </div>
                <br>
            </form>
        </div>
    </div>