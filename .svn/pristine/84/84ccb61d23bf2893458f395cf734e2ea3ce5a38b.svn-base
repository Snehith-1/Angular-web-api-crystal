<main>
  <div>

    <header>
      <div class="tb">
        <div class="td" id="logo">
          <a><i class="bi bi-telegram"></i></a>
        </div>


        <div class="card1">
          <!-- <img src="/assets/images/profile_logo.png" alt="Avatar"> -->
          <br>
          <span style="color: white;font-size:18px;margin-left:8px;">&nbsp;Telegram</span>

          <span style="color: white;font-size:18px;margin-left:708px;">&nbsp;{{title}}</span>
          <br>

          <span style="color: white;font-size:12px;margin-left: 805px;" class="blink">
            <i style="color:green" class="bi bi-circle-fill"></i>
          </span><span style="color:white;margin-top: 45px;">Online</span>
        </div>
      </div>
    </header>
    <div id="details">
      <br><br><br>
      <div style="margin-left: 500px;" class="cnt-label">
        <span><b style="font-size:18px;margin-left: -243px;color:black;font-size:bolder;">Page Id :</b><span
            style="font-size:16px;">&nbsp;{{id}}</span></span>
        <br>
        <span><b style="font-size:18px;margin-left: -243px;color:black;font-size:bolder;">Page Name :</b><span
            style="font-size:16px;">&nbsp; {{title}}</span></span>
        <br>
        <span><b style="font-size:18px;margin-left: -243px;color:black;font-size:bolder;">Bot :</b><span
            style="font-size:16px;">&nbsp;{{bot_name}}</span></span>
        <br>

        <span><b style="font-size:18px;margin-left: -243px;"></b> <a href={{invite_link}}
            style="color:black;font-size:bolder;"><b>Invite Link:</b>&nbsp;&nbsp;{{invite_link}}</a><br></span><BR>

        <div  >
          <span><b style="font-size:18px;margin-left: 59px;color:rgb(63, 62, 62);font-size:bolder;">{{image_count}}</b></span><span
            style="font-size:16px;">&nbsp;Photos</span>&nbsp;
          <span><b style="font-size:18px;margin-left: -1px;color:rgb(63, 62, 62);font-size:bolder;">{{video_count}}</b></span><span
            style="font-size:16px;">&nbsp;Videos</span>&nbsp;
          <span><b style="font-size:18px;color:rgb(63, 62, 62);font-size:bolder;">{{text_count}}</b></span><span
            style="font-size:16px;">&nbsp;Caption</span>



          <button class="btn btn-sm text-white me-4" data-bs-toggle="modal" data-bs-target="#myModaltelegrampost"
            style="margin-left:25px;background-color:#0093f7;font-size: 12px;">
            <b>Post</b> </button>
        </div>
      </div>
    </div>


  </div>
  <br>
  <div class="table-responsive">

    <div class="mx-3 p-3 pt-0 pb-0 bg-white rounded">
      <table id="product" class="table table-striped table-row-bordered border-bottom gs-7 align-middle ">
        <thead>
          <tr class=" text-white fw-bold fs-6 text-nowrap" style="background-color: #229ED9;">
            <th style="width:2%">S.No</th>
            <th>Post</th>
            <th>Date Published</th>
            <th>Posted Type</th>
            <th>Caption</th>
            <th>Action</th>

          </tr>
        </thead>
        <tbody id="Inbox" #Inbox>
          <br>
          <tr
            *ngFor="let data of telegramsummary_list | paginate: { itemsPerPage: pageSize, currentPage: currentPage };let i=index;">
            <td>{{i+1}}</td>
            <td>
              <ng-container *ngIf="data.upload_type === 'Image' ">
                <img src="{{ data.upload_path }}" alt="" style="width:69%;height:55px;">
              </ng-container>
              <span *ngIf="!data.upload_path"></span>
              <ng-container *ngIf="data.upload_type === 'Text' ">
                <img src="{{ data.upload_path }}" alt="" style="width:69%;height:55px;">
                <span *ngIf="!data.upload_path"></span>

              </ng-container>
              <span *ngIf="!data.upload_path"></span>

              <ng-container *ngIf="data.upload_type === 'Video'">
                <video controls style="width:69%;height:60px;">
                  <source [src]="data.upload_path" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
              </ng-container>
              <span *ngIf="!data.upload_path"></span>
            </td>
            <td style="white-space: nowrap;">{{data.created_date}}</td>
            <td style="white-space: nowrap;">&nbsp;&nbsp;&nbsp;{{data.upload_type}}</td>
            <td style="white-space: nowrap;">&nbsp;&nbsp;&nbsp;{{data.telegram_caption}}</td>

            <td> <button title="Repost" type="button" (click)="openModalrepost(data)" data-bs-target="#myModalrepost"
                data-bs-toggle="modal" class="btn eye-button"><span
                  class="fa-solid fa-retweet text-white fs-6"></span></button>&nbsp;
              <button title="Download" type="button" (click)="downloadImage(data)" class="btn download-button">
                <span class="fa-solid fa-download text-white fs-6"></span>
              </button>
            </td>

          </tr>
        </tbody>
      </table>
    </div>

  </div>
  <div class="row ms-3 mt-3 d-flex align-items-center">
    <div class="col">
      <div>Showing {{ (currentPage - 1) * pageSize + 1 }} to {{ (currentPage * pageSize) < telegramsummary_list.length ?
          (currentPage * pageSize) : telegramsummary_list.length }} of {{ telegramsummary_list.length }} entries </div>

      </div>

      <div class="col me-5">
        <div class="float-end">

          <pagination-controls (pageChange)="pageChanged($event)" previousLabel="Previous" nextLabel="Next">
          </pagination-controls>
        </div>
      </div>
    </div>

</main>
<!-- The Modal ADD -->
<form [formGroup]="TelegramForm" #form="ngForm">
  <div class="modal" id="myModaltelegrampost" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">

        <!-- Modal Header -->

        <div class="card-header p-1 pb-2 pt-1 rounded-top bg-primary">
          <h2 style="margin-top:10px;color:white;font-weight: bold;">&nbsp;&nbsp;<i
              class="fas fa-upload fw-bolder fs-3"></i> &nbsp;&nbsp;Telegram Post</h2>

        </div>
        <!-- Modal body -->
        <div class="modal-body">

          <div class="row"><span class="font-bold"><b>Caption</b><span class="ms-1 text-red">*</span></span>
            <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">


              <input formControlName="telegram_caption" type="text" pattern="^(?!\s*$).+"
                class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0bg-white custom-input"
                [ngStyle]="{
                                 'border-color':telegram_caption.invalid && telegram_caption.touched ? 'red': 'rgb(209, 209, 209)' }"
                placeholder="Enter Caption" pattern="^(?!\s*$).+" name="telegram_caption" required />

            </div>
            <div *ngIf="telegram_caption.invalid && (telegram_caption.dirty || telegram_caption.touched)">
              <div *ngIf="telegram_caption.errors?.['required']  || telegram_caption.errors?.['whitespace']">
                <span style="color:red;">Caption is required.</span>
              </div>
            </div>

          </div>
          <br>
          <span class="font-bold"><b>Image/video Only</b></span>
          <br>
          <div class="input-group mb-4" style="margin-left: 12px;width:97%;">



            <input class="form-control" accept="image/*, video/*" style="margin-left:-8px;width:30%;" type="file"
              #fileInput />





          </div>





        </div>

        <!-- Modal footer -->
        <div class="text-center">
          <button (click)="onsubmit()" [disabled]="TelegramForm.invalid" [ngClass]="{
          'primary-button': !TelegramForm.invalid,
          'secondary-button': TelegramForm.invalid
        }" data-bs-dismiss="modal">
            <i class="bi bi-send"></i> &nbsp;Post
          </button>&nbsp;&nbsp;

          <button class="btn-success btn-sm text-white me-4" data-bs-dismiss="modal" (click)="onclose()">
            <i class="fas fa-arrow-left"></i> &nbsp; Back
          </button>


        </div><br>
      </div>
    </div>
  </div>
</form>
<form [formGroup]="repost" #form="ngForm">
  <div class="modal" id="myModalrepost" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="card-header p-1 pb-2 pt-1 rounded-top bg-primary">
          <h2 style="margin-top:10px;color:white;font-weight: bold;">&nbsp;&nbsp;<i
              class="fas fa-upload fw-bolder fs-3"></i> &nbsp;&nbsp;Telegram RePost</h2>

        </div>
        <div class="modal-body">
          <input class="form-control form-control-lg" formControlName="image_id" hidden type="text"
            aria-label=".form-control-lg example" autocomplete="off" required pattern="^(?!\s*$).+">

          <div class="row"><span class="font-bold"><b>Caption</b><span class="ms-1 text-red">*</span></span>
            <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">

              <input formControlName="telegram_caption" type="text" pattern="^(?!\s*$).+"
                class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0bg-white custom-input"
                [ngStyle]="{
                                 'border-color':telegram_caption.invalid && telegram_caption.touched ? 'red': 'rgb(209, 209, 209)' }"
                placeholder="Enter Caption" pattern="^(?!\s*$).+" name="telegram_caption" required />

            </div>
            <div *ngIf="telegram_caption.invalid && (telegram_caption.dirty || telegram_caption.touched)">
              <div *ngIf="telegram_caption.errors?.['required']  || telegram_caption.errors?.['whitespace']">
                <span style="color:red;">Caption is required.</span>
              </div>
            </div>
          </div>



          <br>

          <div class="mb-3">
            <label for="exampleFormControlTextarea1" class="form-label"><b>Post Type</b></label>
            <input formControlName="upload_type" type="text" [readonly]="isReadOnly" pattern="^(?!\s*$).+"
              class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0bg-white custom-input"
              placeholder="Enter Caption" pattern="^(?!\s*$).+" name="upload_type" />

          </div>


        </div>


        <div class="text-center">
          <button (click)="onupdate(repost.value.image_id)" [disabled]="repost.invalid" [ngClass]="{
          'primary-button': !repost.invalid,
          'secondary-button': repost.invalid
        }" data-bs-dismiss="modal">
            <i class="bi bi-send"></i> &nbsp;Post
          </button>&nbsp;&nbsp;

          <button class="btn-success btn-sm text-white me-4" data-bs-dismiss="modal" (click)="onclose()">
            <i class="fas fa-arrow-left"></i> &nbsp; Back
          </button>


        </div><br>
        <!-- <div class="text-center my-4">
          <button (click)="onupdate(repost.value.image_id)" data-bs-dismiss="modal">
              <i class="fas fa-check text-white fs-5 "></i> &nbsp;Update
          </button> &nbsp;&nbsp;
          <button class="btn-danger btn-sm text-white me-4"  (click)="onclose()" data-bs-dismiss="modal">
              <i class="fas fa-close text-white"></i> &nbsp;Close
          </button>
      </div> -->
      </div>

    </div>
  </div>
</form>