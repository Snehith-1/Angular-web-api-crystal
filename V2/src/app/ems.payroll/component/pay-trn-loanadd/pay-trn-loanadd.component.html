<div class="card">
  <div class="card-header bg-lightblue">
    <h3 class="card-title"><b>Create Loan</b></h3>
  </div>
  <form [formGroup]="reactiveForm" #form="ngForm">
    <div class="m-4 mt-4 border card ">
      <!-- ADD Function -->
      <div class="d-flex flex-row m-6 flex-wrap">
        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Loan Ref. No</span>            
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input formControlName="loan_refno" type="text" class="form-control form-control-lg form-control-solid borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input" placeholder="Enter Loan Ref. No" name="loan_refno" required />
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Employee</span>
          <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <ng-select formControlName="employee" [class.is-invalid]="employee.invalid && (employee.dirty || employee.touched)" [ngClass]="{'invalid-border': employee.invalid && employee.touched}" [items]="employeelist" required class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2" bindLabel="employee_name" bindValue="employee_gid" placeholder="Select an option"></ng-select>
            <div *ngIf="employee.invalid && (employee.dirty || employee.touched)">
              <div *ngIf="employee.errors?.['required']"><span class="text-red fs-8">* Employee is required.</span>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold requierd">Type</span>          
          <div class="d-flex justify-content-start mt-4 ms-2">
            <div class="form-check form-check-custom form-check-primary form-check-solid form-check-sm">
              <input class="form-check-input" type="radio" name="active_flag" formControlName="type" value="loan" />
              <label class="form-check-label text-gray-700 text-nowrap" for="empAccessYes">Loan</label>
            </div>
            <div class="form-check form-check-custom form-check-primary form-check-solid form-check-sm ms-10">
              <input class="form-check-input" type="radio" name="active_flag" formControlName="type" value="advance" />
              <label class="form-check-label text-gray-700 text-nowrap" for="empAccessNo">ADVANCE</label>
            </div>
          </div>
        </div>
      </div>


      <div class="d-flex flex-row m-6 flex-wrap">
        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Loan Name</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input formControlName="loan_name" type="text" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input" [ngStyle]="{'border-color': loan_name.invalid && loan_name.touched ? 'red' : 'rgb(209, 209, 209)'}" placeholder="Enter Loan Name" pattern="^(?!\s*$).+" name="loan_name" required />
          </div>
          <div *ngIf="loan_name.invalid && (loan_name.dirty || loan_name.touched)">
            <div *ngIf="loan_name.errors?.['required']"><span class="text-red fs-8">* Loan Name is required.</span>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Loan Amount</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input formControlName="loan_amount" type="text" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input" [ngStyle]="{'border-color': loan_amount.invalid && loan_amount.touched ? 'red' : 'rgb(209, 209, 209)'}" placeholder="Enter Loan Amount" pattern="^(?!\s*$).+" name="loan_amount" required [(ngModel)]="loanamount" (input)="pendingamountcalc()" />
          </div>
          <div *ngIf="loan_amount.invalid && (loan_amount.dirty || loan_amount.touched)">
            <div *ngIf="loan_amount.errors?.['required']"><span class="text-red fs-8">* Loan Amount is required.</span>
            </div>
          </div>

        </div>
        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required ms-3">Duration Period</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input formControlName="durationperiod" type="text" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input" placeholder="Enter Duration" name="pend_amt"[(ngModel)]="durationperiod" (input)="pendingamountcalc()" required />

          </div>
        </div>
      </div>

      <!-- <div class="d-flex flex-row m-6 flex-wrap">
        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Paid Amount</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input formControlName="paid_amt" type="text" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input" placeholder="Enter Paid Amount" name="paid_amt" required />
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Pending Amount</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input formControlName="pend_amt" type="text" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input" placeholder="Enter Pending Amount" name="pend_amt" required />
          </div>

        </div>
        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required ms-3">Duration Period</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input formControlName="durationperiod" type="text" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input" placeholder="Enter Pending Amount" name="pend_amt" required />

          </div>
        </div>
      </div> -->
      <div class="d-flex flex-row m-6 flex-wrap">
        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Repayment Amount(permonth)</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input formControlName="repayamtpermonth" type="text" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input" placeholder="Enter Paid Amount" name="paid_amt" [(ngModel)]="repayamtpermonth"required />
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Repayment Start from</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input type="text" formControlName="repaymentstartdate" class="form-control form-control-lg
            form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-input mb-3 mb-lg-0"
             placeholder="DD-MM-YYYY" name="repaymentstartdate"/>        
              </div>

        </div>
        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required ms-3">Remarks</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <textarea type="text" formControlName="remarks" class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0  borderc-secondary bg-white custom-input" placeholder=" Enter Remarks" formControlName="remarks" class="form-control" rows="3">
            </textarea>
          </div>
        </div>
      </div>
      <div class="d-flex flex-row fv-row flex-wrap m-6">
        <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold required">Payment Mode</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <!-- <ng-select formControlName="payment_mode" 
            style="width: 70%;" 
            [(ngModel)]="payment_mode" (change)="showTextBox($event)" placeholder="Select Payment Mode" >
              <ng-option bindvalue="Cash">Cash</ng-option>
              <ng-option value="Cheque">Cheque</ng-option>
              <ng-option value="DD">DD</ng-option>
              <ng-option value="Credit Card">Credit Card</ng-option>
              <ng-option value="NEFT">NEFT</ng-option>
            
            </ng-select> -->

            <select formControlName="payment_mode" class="form-select form-select-solid bg-white
             form-select-lg border-secondary custom-input select2" (change)="showTextBox($event)">
              <option value="">--Select an option--</option>
              <option value="Cash">Cash</option>
              <option value="Cheque">Cheque</option>
              <option value="DD">DD</option>
              <!-- <option value="Credit Card">Credit Card</option> -->
              <option value="NEFT">NEFT</option>
            </select>
          </div>
        </div>
      </div>

      <div class="d-flex flex-row m-6 flex-wrap mt-5" *ngIf="showInput">
        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Date</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-5">
            <input type="date" formControlName="payment_date" class="form-control form-control-lg
            form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-input mb-3 mb-lg-0"
             placeholder="DD-MM-YYYY" name="payment_date"/>    
          </div>
        </div>
      </div>

      <div class="d-flex flex-row m-6 flex-wrap mt-5" *ngIf="showInput1 || showInput2">
        <div class="col-12 col-lg-2 col-md-2 col-sm-12"><span class="font-bold">Cheque No</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
            <input formControlName="cheque_no" type="text" class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" placeholder="Enter Cheque No" name="cheque_no" />
          </div>
        </div>

        <div class="col-12 col-lg-2 col-md-2 col-sm-12"><span class="font-bold">Date</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
            <input type="date" formControlName="payment_date" class="form-control form-control-lg
            form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-input mb-3 mb-lg-0"
             placeholder="DD-MM-YYYY" name="payment_date"/>            
            </div>
        </div>

        <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Deposit Bank</span>
          <div class="mt-3">
            <ng-select formControlName="bank" [class.is-invalid]="bank.invalid && (bank.dirty || bank.touched)"
              [ngClass]="{'invalid-border': bank.invalid && bank.touched}" [items]="bankdetailslist" required
              class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2" bindLabel="bank_name"
              bindValue="bank_name" placeholder="Select an option"></ng-select>
          </div>
        </div>

        <div class="col-12 col-lg-2 col-md-2 col-sm-12"><span class="font-bold">Bank Name</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
            <input formControlName="bank_name" type="text"
              class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3"
              placeholder="Enter Branch Name" name="bank_name" />
          </div>
        </div>

        <div class="col-12 col-lg-2 col-md-2 col-sm-12"><span class="font-bold">Branch Name</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
            <input formControlName="branch_name" type="text"
              class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3"
              placeholder="Enter Branch Name" name="branch_name" />
          </div>
        </div>
      </div>

      <div class="d-flex flex-row m-6 flex-wrap mt-5" *ngIf="showInput3">
        <div class="col-12 col-lg-2 col-md-2 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row"><span class="font-bold">Date</span>
            <input type="date" formControlName="payment_date" class="form-control form-control-lg
            form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-input mb-3 mb-lg-0"
             placeholder="DD-MM-YYYY" name="payment_date"/>    
          </div>
        </div>

        <div class="col-12 col-lg-2 col-md-2 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row"><span class="font-bold">Transaction Ref.No</span>
            <input formControlName="cheque_no" type="text"
              class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3"
              placeholder="Enter Cheque No" name="cheque_no" />
          </div>
        </div>

        <div class="col-12 col-lg-2 col-md-2 col-sm-12"><span class="font-bold">Deposit Bank</span>
          <div class="mt-3">
            <ng-select formControlName="bank" [class.is-invalid]="bank.invalid && (bank.dirty || bank.touched)"
              [ngClass]="{'invalid-border': bank.invalid && bank.touched}" [items]="bankdetailslist" required
              class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2" bindLabel="bank_name"
              bindValue="bank_name" placeholder="Select an option"></ng-select>
          </div>
        </div>
      </div>

      <div class="text-center my-4">
        <button (click)="onconfirm()" class="btn-success btn-sm text-white me-4">
          <i class="bi bi-check-square fs-5"></i>
          <span class="ms-3">Confirm</span>
        </button>
        <button class="btn-danger btn-sm text-white me-4" (click)="oncancel()">
          <i class="fa fa-times"></i>
          <span class="ms-3">Cancel</span>
        </button>
      </div>
    
    </div>
  </form>
</div>